"use strict";(self.webpackChunkecom=self.webpackChunkecom||[]).push([[617],{9617:(O,d,r)=>{r.r(d),r.d(d,{AuthModule:()=>M});var p=r(177),g=r(3824),i=r(4341),t=r(8699),h=r(4613),f=r(5312),v=r(1626);let b=(()=>{class e{constructor(n){this.http=n,this.baseUrls=f.c.baseUrl}login(n){return this.http.post(this.baseUrls+"/user/login",n)}register(n){return this.http.post(this.baseUrls+"/user/register",n)}static{this.\u0275fac=function(o){return new(o||e)(t.KVO(v.Qq))}}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function C(e,m){1&e&&(t.j41(0,"div",10),t.EFF(1," Please enter a valid email "),t.k0s())}function F(e,m){1&e&&(t.j41(0,"div",10),t.EFF(1," Password must be at least 6 characters long "),t.k0s())}function k(e,m){1&e&&(t.j41(0,"div",10),t.EFF(1," Please enter a valid email "),t.k0s())}function w(e,m){1&e&&(t.j41(0,"div",10),t.EFF(1," Password is required "),t.k0s())}const y=[{path:"",component:(()=>{class e{constructor(n,o,s,l){this.fb=n,this.toster=o,this.loginser=s,this.router=l,this.isSignup=!0,this.registerForm=this.fb.group({email:["",[i.k0.required,i.k0.email]],password:["",[i.k0.required,i.k0.minLength(6)]]}),this.loginForm=this.fb.group({email:["",[i.k0.required,i.k0.email]],password:["",i.k0.required]})}onSignup(){if(this.registerForm.valid){const n={email:this.registerForm.value.email,password:this.registerForm.value.password};localStorage.setItem("email",n.email),this.loginser.register(n).subscribe(o=>{0==o.statusCode?(localStorage.setItem("userId",o.responseContent.id),"ROLE_ADMIN"==o.responseContent.role?(this.toster.showCustomPopup("success","Login Successfully"),this.router.navigate(["/admin/"])):"ROLE_USER"==o.responseContent.role&&(this.toster.showCustomPopup("success","Login Successfully"),this.router.navigate(["/"]))):this.toster.showCustomPopup("error",o.errorMessage)})}else this.toster.showCustomPopup("error","Invalid form. Please fill in all fields correctly.")}onLogin(){if(this.loginForm.valid){const n={email:this.loginForm.value.email,password:this.loginForm.value.password};console.log(n),localStorage.setItem("email",n.email),this.loginser.login(n).subscribe(o=>{0==o.statusCode?(console.log(o.responseContent),localStorage.setItem("userId",o.responseContent.id),"ROLE_ADMIN"==o.responseContent.role?(this.toster.showCustomPopup("success","Login Successfully"),this.router.navigate(["/admin/"])):"ROLE_USER"==o.responseContent.role&&(this.toster.showCustomPopup("success","Login Successfully"),this.router.navigate(["/"]))):this.toster.showCustomPopup("error","Invalid email or password")}),console.log("Login data:",this.loginForm.value)}else this.toster.showCustomPopup("error","Invalid email or password")}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(i.ok),t.rXU(h.u),t.rXU(b),t.rXU(g.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-login"]],decls:23,vars:8,consts:[[1,"main"],["type","checkbox","id","chk","aria-hidden","true"],[1,"signup"],[3,"formGroup","ngSubmit"],["for","chk","aria-hidden","true"],["type","email","formControlName","email","placeholder","Email","required","",1,"form-control"],["class","text-danger",4,"ngIf"],["type","password","formControlName","password","placeholder","Password","required","",1,"form-control"],["type","submit",3,"disabled"],[1,"login"],[1,"text-danger"]],template:function(o,s){if(1&o&&(t.j41(0,"body")(1,"div",0),t.nrm(2,"input",1),t.j41(3,"div",2)(4,"form",3),t.bIt("ngSubmit",function(){return s.onSignup()}),t.j41(5,"label",4),t.EFF(6,"Sign up"),t.k0s(),t.nrm(7,"input",5),t.DNE(8,C,2,0,"div",6),t.nrm(9,"input",7),t.DNE(10,F,2,0,"div",6),t.j41(11,"button",8),t.EFF(12,"Sign up"),t.k0s()()(),t.j41(13,"div",9)(14,"form",3),t.bIt("ngSubmit",function(){return s.onLogin()}),t.j41(15,"label",4),t.EFF(16,"Login"),t.k0s(),t.nrm(17,"input",5),t.DNE(18,k,2,0,"div",6),t.nrm(19,"input",7),t.DNE(20,w,2,0,"div",6),t.j41(21,"button",8),t.EFF(22,"Login"),t.k0s()()()()()),2&o){let l,a,u,c;t.R7$(4),t.Y8G("formGroup",s.registerForm),t.R7$(4),t.Y8G("ngIf",(null==(l=s.registerForm.get("email"))?null:l.invalid)&&(null==(l=s.registerForm.get("email"))?null:l.touched)),t.R7$(2),t.Y8G("ngIf",(null==(a=s.registerForm.get("password"))?null:a.invalid)&&(null==(a=s.registerForm.get("password"))?null:a.touched)),t.R7$(1),t.Y8G("disabled",s.registerForm.invalid),t.R7$(3),t.Y8G("formGroup",s.loginForm),t.R7$(4),t.Y8G("ngIf",(null==(u=s.loginForm.get("email"))?null:u.invalid)&&(null==(u=s.loginForm.get("email"))?null:u.touched)),t.R7$(2),t.Y8G("ngIf",(null==(c=s.loginForm.get("password"))?null:c.invalid)&&(null==(c=s.loginForm.get("password"))?null:c.touched)),t.R7$(1),t.Y8G("disabled",s.loginForm.invalid)}},dependencies:[p.bT,i.qT,i.me,i.BC,i.cb,i.YS,i.j4,i.JD],styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;justify-content:center;align-items:center;min-height:100vh;font-family:Jost,sans-serif;background:linear-gradient(to bottom,#0f0c29,#302b63,#24243e)}.main[_ngcontent-%COMP%]{width:350px;height:500px;background:red;overflow:hidden;background:url(https://doc-08-2c-docs.googleusercontent.com/docs/securesc/68c90smiglihng9534mvqmq1946dmis5/fo0picsp1nhiucmc0l25s29respgpr4j/1631524275000/03522360960922298374/03522360960922298374/1Sx0jhdpEpnNIydS4rnN4kHSJtU1EyWka?e=view&authuser=0&nonce=gcrocepgbb17m&user=03522360960922298374&hash=tfhgbs86ka6divo3llbvp93mg4csvb38) no-repeat center/ cover;border-radius:10px;box-shadow:5px 20px 50px #000}#chk[_ngcontent-%COMP%]{display:none}.signup[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}label[_ngcontent-%COMP%]{color:#fff;font-size:2.3em;justify-content:center;display:flex;margin:50px;font-weight:700;cursor:pointer;transition:.5s ease-in-out}input[_ngcontent-%COMP%]{width:60%;height:10px;background:#e0dede;justify-content:center;display:flex;margin:20px auto;padding:12px;border:none;outline:none;border-radius:5px}button[_ngcontent-%COMP%]{width:60%;height:40px;margin:30px auto 10px;justify-content:center;display:block;color:#fff;background:#573b8a;font-size:1em;font-weight:700;outline:none;border:none;border-radius:5px;transition:.2s ease-in;cursor:pointer}button[_ngcontent-%COMP%]:hover{background:#6d44b8}.login[_ngcontent-%COMP%]{height:460px;background:#eee;border-radius:60%/10%;transform:translateY(-180px);transition:.8s ease-in-out}.login[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#573b8a;transform:scale(.6)}#chk[_ngcontent-%COMP%]:checked ~ .login[_ngcontent-%COMP%]{transform:translateY(-500px)}#chk[_ngcontent-%COMP%]:checked ~ .login[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{transform:scale(1)}#chk[_ngcontent-%COMP%]:checked ~ .signup[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{transform:scale(.6)}.text-danger[_ngcontent-%COMP%]{text-align:center}"]})}}return e})()},{path:"register",component:(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-register"]],decls:2,vars:0,template:function(o,s){1&o&&(t.j41(0,"p"),t.EFF(1,"register works!"),t.k0s())}})}}return e})()}];let P=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[g.iI.forChild(y),g.iI]})}}return e})(),M=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[p.MD,P,i.X1]})}}return e})()}}]);